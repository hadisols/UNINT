@isTest
public class SYS_HttpBuilderTest {
    @isTest static void testHttprequest() {
        string resJson = '{"timestamp":1632506618120,"webhookEvent":"jira:issue_updated","issue_event_type_name":"issue_generic","user":{"self":"https://jira-salesforce-dev.atlassian.net/rest/api/2/user?accountId=614a3d122a6f5a0071186cf3","accountId":"614a3d122a6f5a0071186cf3","avatarUrls":{"48x48":"https://secure.gravatar.com/avatar/2509efaa1242226271ed0e4608fd88a4?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FA-0.png","24x24":"https://secure.gravatar.com/avatar/2509efaa1242226271ed0e4608fd88a4?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FA-0.png","16x16":"https://secure.gravatar.com/avatar/2509efaa1242226271ed0e4608fd88a4?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FA-0.png","32x32":"https://secure.gravatar.com/avatar/2509efaa1242226271ed0e4608fd88a4?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FA-0.png"},"displayName":"Adisols","active":true,"timeZone":"Etc/GMT","accountType":"atlassian"},"issue":{"id":"10042","self":"https://jira-salesforce-dev.atlassian.net/rest/api/2/10042","key":"SI-43","fields":{"statuscategorychangedate":"2021-09-24T18:03:38.098+0000","issuetype":{"self":"https://jira-salesforce-dev.atlassian.net/rest/api/2/issuetype/10004","id":"10004","description":"A problem or error.","iconUrl":"https://jira-salesforce-dev.atlassian.net/secure/viewavatar?size=medium&avatarId=10303&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":10303,"hierarchyLevel":0},"timespent":null,"project":{"self":"https://jira-salesforce-dev.atlassian.net/rest/api/2/project/10000","id":"10000","key":"SI","name":"Salesforce Integration","projectTypeKey":"software","simplified":false,"avatarUrls":{"48x48":"https://jira-salesforce-dev.atlassian.net/secure/projectavatar?pid=10000&avatarId=10423","24x24":"https://jira-salesforce-dev.atlassian.net/secure/projectavatar?size=small&s=small&pid=10000&avatarId=10423","16x16":"https://jira-salesforce-dev.atlassian.net/secure/projectavatar?size=xsmall&s=xsmall&pid=10000&avatarId=10423","32x32":"https://jira-salesforce-dev.atlassian.net/secure/projectavatar?size=medium&s=medium&pid=10000&avatarId=10423"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://jira-salesforce-dev.atlassian.net/rest/api/2/resolution/10000","id":"10000","description":"Work has been completed on this issue.","name":"Done"},"customfield_10027":[],"customfield_10028":null,"customfield_10029":null,"resolutiondate":"2021-09-24T18:03:38.094+0000","workratio":-1,"watches":{"self":"https://jira-salesforce-dev.atlassian.net/rest/api/2/issue/SI-43/watchers","watchCount":1,"isWatching":false},"issuerestriction":{"issuerestrictions":{},"shouldDisplay":false},"lastViewed":"2021-09-24T18:02:42.247+0000","created":"2021-09-24T18:01:45.242+0000","customfield_10020":null,"customfield_10021":null,"customfield_10022":null,"customfield_10023":null,"priority":{"self":"https://jira-salesforce-dev.atlassian.net/rest/api/2/priority/3","iconUrl":"https://jira-salesforce-dev.atlassian.net/images/icons/priorities/medium.svg","name":"Medium","id":"3"},"customfield_10024":null,"customfield_10025":"3_*:*_1_*:*_5786_*|*_10000_*:*_1_*:*_70885_*|*_10001_*:*_2_*:*_36207","customfield_10026":null,"labels":[],"customfield_10016":null,"customfield_10017":null,"customfield_10018":{"hasEpicLinkFieldDependency":false,"showField":false,"nonEditableReason":{"reason":"PLUGIN_LICENSE_ERROR","message":"The Parent Link is only available to Jira Premium users."}},"customfield_10019":"0|i0009b:","timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[],"issuelinks":[],"assignee":null,"updated":"2021-09-24T18:03:38.098+0000","status":{"self":"https://jira-salesforce-dev.atlassian.net/rest/api/2/status/10001","description":"","iconUrl":"https://jira-salesforce-dev.atlassian.net/","name":"Done","id":"10001","statusCategory":{"self":"https://jira-salesforce-dev.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[],"timeoriginalestimate":null,"description":"jereTestdata Updated","customfield_10010":null,"customfield_10014":null,"customfield_10015":null,"timetracking":{},"customfield_10005":null,"customfield_10006":null,"customfield_10007":null,"security":null,"customfield_10008":null,"aggregatetimeestimate":null,"customfield_10009":null,"attachment":[],"summary":"jereTestdata Updated","creator":{"self":"https://jira-salesforce-dev.atlassian.net/rest/api/2/user?accountId=6149e5a92a6f5a0071146f16","accountId":"6149e5a92a6f5a0071146f16","avatarUrls":{"48x48":"https://secure.gravatar.com/avatar/a21b06b775d276020e1abcec652b0818?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FSP-4.png","24x24":"https://secure.gravatar.com/avatar/a21b06b775d276020e1abcec652b0818?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FSP-4.png","16x16":"https://secure.gravatar.com/avatar/a21b06b775d276020e1abcec652b0818?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FSP-4.png","32x32":"https://secure.gravatar.com/avatar/a21b06b775d276020e1abcec652b0818?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FSP-4.png"},"displayName":"Soumya Ranjan Patel","active":true,"timeZone":"Etc/GMT","accountType":"atlassian"},"subtasks":[],"reporter":{"self":"https://jira-salesforce-dev.atlassian.net/rest/api/2/user?accountId=6149e5a92a6f5a0071146f16","accountId":"6149e5a92a6f5a0071146f16","avatarUrls":{"48x48":"https://secure.gravatar.com/avatar/a21b06b775d276020e1abcec652b0818?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FSP-4.png","24x24":"https://secure.gravatar.com/avatar/a21b06b775d276020e1abcec652b0818?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FSP-4.png","16x16":"https://secure.gravatar.com/avatar/a21b06b775d276020e1abcec652b0818?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FSP-4.png","32x32":"https://secure.gravatar.com/avatar/a21b06b775d276020e1abcec652b0818?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FSP-4.png"},"displayName":"Soumya Ranjan Patel","active":true,"timeZone":"Etc/GMT","accountType":"atlassian"},"customfield_10000":"{}","aggregateprogress":{"progress":0,"total":0},"customfield_10001":null,"customfield_10002":null,"customfield_10003":null,"customfield_10004":null,"environment":null,"duedate":null,"progress":{"progress":0,"total":0},"votes":{"self":"https://jira-salesforce-dev.atlassian.net/rest/api/2/issue/SI-43/votes","votes":0,"hasVoted":false}}},"changelog":{"id":"10102","items":[{"field":"resolution","fieldtype":"jira","fieldId":"resolution","from":null,"fromString":null,"to":"10000","toString":"Done"},{"field":"status","fieldtype":"jira","fieldId":"status","from":"3","fromString":"In Progress","to":"10001","toString":"Done"}]}}';
        Map < String, String > responseHeaders = new Map < String, String > ();
        responseHeaders.put('Content-Type', 'application/json');
        Test.setMock(HttpCalloutMock.class, new NileCalloutMock(200, 'OK', resJson, responseHeaders));
        Test.startTest();

        NileRestMokecallOut.requestRestCallout(resJson,200);
        HttpRequest testhttp = SYS_HttpBuilder.getHttpRequest();
        Test.stopTest();
        System.debug('testhttp'+testhttp);
        System.assertEquals('200','200', 'Http Callout Success');
    }
    @isTest static void testgetHttpRequestGET() {
        string resJson = '{"timestamp":1632506618120,"webhookEvent":"jira:issue_updated","issue_event_type_name":"issue_generic","user":{"self":"https://jira-salesforce-dev.atlassian.net/rest/api/2/user?accountId=614a3d122a6f5a0071186cf3","accountId":"614a3d122a6f5a0071186cf3","avatarUrls":{"48x48":"https://secure.gravatar.com/avatar/2509efaa1242226271ed0e4608fd88a4?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FA-0.png","24x24":"https://secure.gravatar.com/avatar/2509efaa1242226271ed0e4608fd88a4?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FA-0.png","16x16":"https://secure.gravatar.com/avatar/2509efaa1242226271ed0e4608fd88a4?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FA-0.png","32x32":"https://secure.gravatar.com/avatar/2509efaa1242226271ed0e4608fd88a4?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FA-0.png"},"displayName":"Adisols","active":true,"timeZone":"Etc/GMT","accountType":"atlassian"},"issue":{"id":"10042","self":"https://jira-salesforce-dev.atlassian.net/rest/api/2/10042","key":"SI-43","fields":{"statuscategorychangedate":"2021-09-24T18:03:38.098+0000","issuetype":{"self":"https://jira-salesforce-dev.atlassian.net/rest/api/2/issuetype/10004","id":"10004","description":"A problem or error.","iconUrl":"https://jira-salesforce-dev.atlassian.net/secure/viewavatar?size=medium&avatarId=10303&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":10303,"hierarchyLevel":0},"timespent":null,"project":{"self":"https://jira-salesforce-dev.atlassian.net/rest/api/2/project/10000","id":"10000","key":"SI","name":"Salesforce Integration","projectTypeKey":"software","simplified":false,"avatarUrls":{"48x48":"https://jira-salesforce-dev.atlassian.net/secure/projectavatar?pid=10000&avatarId=10423","24x24":"https://jira-salesforce-dev.atlassian.net/secure/projectavatar?size=small&s=small&pid=10000&avatarId=10423","16x16":"https://jira-salesforce-dev.atlassian.net/secure/projectavatar?size=xsmall&s=xsmall&pid=10000&avatarId=10423","32x32":"https://jira-salesforce-dev.atlassian.net/secure/projectavatar?size=medium&s=medium&pid=10000&avatarId=10423"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://jira-salesforce-dev.atlassian.net/rest/api/2/resolution/10000","id":"10000","description":"Work has been completed on this issue.","name":"Done"},"customfield_10027":[],"customfield_10028":null,"customfield_10029":null,"resolutiondate":"2021-09-24T18:03:38.094+0000","workratio":-1,"watches":{"self":"https://jira-salesforce-dev.atlassian.net/rest/api/2/issue/SI-43/watchers","watchCount":1,"isWatching":false},"issuerestriction":{"issuerestrictions":{},"shouldDisplay":false},"lastViewed":"2021-09-24T18:02:42.247+0000","created":"2021-09-24T18:01:45.242+0000","customfield_10020":null,"customfield_10021":null,"customfield_10022":null,"customfield_10023":null,"priority":{"self":"https://jira-salesforce-dev.atlassian.net/rest/api/2/priority/3","iconUrl":"https://jira-salesforce-dev.atlassian.net/images/icons/priorities/medium.svg","name":"Medium","id":"3"},"customfield_10024":null,"customfield_10025":"3_*:*_1_*:*_5786_*|*_10000_*:*_1_*:*_70885_*|*_10001_*:*_2_*:*_36207","customfield_10026":null,"labels":[],"customfield_10016":null,"customfield_10017":null,"customfield_10018":{"hasEpicLinkFieldDependency":false,"showField":false,"nonEditableReason":{"reason":"PLUGIN_LICENSE_ERROR","message":"The Parent Link is only available to Jira Premium users."}},"customfield_10019":"0|i0009b:","timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[],"issuelinks":[],"assignee":null,"updated":"2021-09-24T18:03:38.098+0000","status":{"self":"https://jira-salesforce-dev.atlassian.net/rest/api/2/status/10001","description":"","iconUrl":"https://jira-salesforce-dev.atlassian.net/","name":"Done","id":"10001","statusCategory":{"self":"https://jira-salesforce-dev.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[],"timeoriginalestimate":null,"description":"jereTestdata Updated","customfield_10010":null,"customfield_10014":null,"customfield_10015":null,"timetracking":{},"customfield_10005":null,"customfield_10006":null,"customfield_10007":null,"security":null,"customfield_10008":null,"aggregatetimeestimate":null,"customfield_10009":null,"attachment":[],"summary":"jereTestdata Updated","creator":{"self":"https://jira-salesforce-dev.atlassian.net/rest/api/2/user?accountId=6149e5a92a6f5a0071146f16","accountId":"6149e5a92a6f5a0071146f16","avatarUrls":{"48x48":"https://secure.gravatar.com/avatar/a21b06b775d276020e1abcec652b0818?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FSP-4.png","24x24":"https://secure.gravatar.com/avatar/a21b06b775d276020e1abcec652b0818?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FSP-4.png","16x16":"https://secure.gravatar.com/avatar/a21b06b775d276020e1abcec652b0818?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FSP-4.png","32x32":"https://secure.gravatar.com/avatar/a21b06b775d276020e1abcec652b0818?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FSP-4.png"},"displayName":"Soumya Ranjan Patel","active":true,"timeZone":"Etc/GMT","accountType":"atlassian"},"subtasks":[],"reporter":{"self":"https://jira-salesforce-dev.atlassian.net/rest/api/2/user?accountId=6149e5a92a6f5a0071146f16","accountId":"6149e5a92a6f5a0071146f16","avatarUrls":{"48x48":"https://secure.gravatar.com/avatar/a21b06b775d276020e1abcec652b0818?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FSP-4.png","24x24":"https://secure.gravatar.com/avatar/a21b06b775d276020e1abcec652b0818?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FSP-4.png","16x16":"https://secure.gravatar.com/avatar/a21b06b775d276020e1abcec652b0818?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FSP-4.png","32x32":"https://secure.gravatar.com/avatar/a21b06b775d276020e1abcec652b0818?d=https%3A%2F%2Favatar-management--avatars.us-west-2.prod.public.atl-paas.net%2Finitials%2FSP-4.png"},"displayName":"Soumya Ranjan Patel","active":true,"timeZone":"Etc/GMT","accountType":"atlassian"},"customfield_10000":"{}","aggregateprogress":{"progress":0,"total":0},"customfield_10001":null,"customfield_10002":null,"customfield_10003":null,"customfield_10004":null,"environment":null,"duedate":null,"progress":{"progress":0,"total":0},"votes":{"self":"https://jira-salesforce-dev.atlassian.net/rest/api/2/issue/SI-43/votes","votes":0,"hasVoted":false}}},"changelog":{"id":"10102","items":[{"field":"resolution","fieldtype":"jira","fieldId":"resolution","from":null,"fromString":null,"to":"10000","toString":"Done"},{"field":"status","fieldtype":"jira","fieldId":"status","from":"3","fromString":"In Progress","to":"10001","toString":"Done"}]}}';
        Map < String, String > responseHeaders = new Map < String, String > ();
        responseHeaders.put('Content-Type', 'application/json');
        Test.setMock(HttpCalloutMock.class, new NileCalloutMock(200, 'OK', resJson, responseHeaders));
        Test.startTest();

        NileRestMokecallOut.requestRestCallout(resJson,200);
        HttpRequest testhttp = SYS_HttpBuilder.getHttpRequestGET();
        Test.stopTest();
        System.debug('testhttp'+testhttp);
        System.assertEquals('200','200', 'Http Callout Success');
    }
    @isTest static void checkgetResourceUrlFromObjectApi() {
       Test.startTest();
        String resurl = SYS_HttpBuilder.getResourceUrlFromObjectApi('Case');
        Test.stopTest();
        System.assertEquals('callout:Jira/rest/api/2/issue/',resurl, 'GET Resource URL Success');
    }
    //public static FINAL String RESOURCE = 'entityName/entityId?minorversion=59';
    // @isTest static void checkgetResourceReadUrl() {
    //    Test.startTest();
    //     String resurl = SYS_HttpBuilder.getResourceReadUrl('entityName','entityId');
    //     Test.stopTest();
    //     System.assertEquals('callout:Jiraentityname/entityId?minorversion=59',resurl, 'GET Resource URL Success');
    // }
}